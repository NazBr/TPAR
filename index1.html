<html>
  <head>
    <meta charset="UTF-8">
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  </head>
  <body>
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
      <a-marker preset="hiro">    
        <a-box id="box"
               class="clickable"
               position="0 0.5 0"
               material="opacity: 0.8; color: red; transparent: true"
               animation__spin="property: rotation; to: 0 360 0; loop: true; dur: 10000">
        </a-box>
      </a-marker>

      <!-- Caméra + curseur -->
      <a-entity camera>
        <a-cursor 
          fuse="false" 
          raycaster="objects: .clickable" 
          material="color: white; shader: flat">
        </a-cursor>
      </a-entity>
    </a-scene>

    <script>
      const box = document.querySelector('#box');
      let speed = 10000; // vitesse de rotation initiale
      let clickCount = 0;

      box.addEventListener('click', () => {
        // Couleur aléatoire
        const randomColor = '#'+Math.floor(Math.random()*16777215).toString(16);
        box.setAttribute('material', 'color', randomColor);

        // Accélère la rotation
        speed = Math.max(500, speed - 2000);
        box.setAttribute('animation__spin', {
          property: 'rotation',
          to: '0 360 0',
          loop: true,
          dur: speed
        });

        // Création d’un nom unique pour l’animation d’échelle
        clickCount++;
        const animName = 'scale' + clickCount;

        box.setAttribute(`animation__${animName}`, {
          property: 'scale',
          to: '1.5 1.5 1.5',
          dur: 500,
          dir: 'alternate',
          loop: 2
        });
      });
    </script>
     <footer>
      <nav>
        <a href="index.html">Menu</a>
        <a href="index2.html">Exercice 1</a>
        <a href="index1.html">Exercice 2/3</a>
        <a href="index3.html">Exercice 4</a>
      </nav>
    </footer>
  </body>
</html>
